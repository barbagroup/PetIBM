<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.3"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>PetIBM: Linear solvers</title>
<link href="../../tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../jquery.js"></script>
<script type="text/javascript" src="../../dynsections.js"></script>
<link href="../../navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../resize.js"></script>
<script type="text/javascript" src="../../navtreedata.js"></script>
<script type="text/javascript" src="../../navtree.js"></script>
<link href="../../search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../search/searchdata.js"></script>
<script type="text/javascript" src="../../search/search.js"></script>
<link href="../../doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">PetIBM<span id="projectnumber">&#160;0.5.4</span>
   </div>
   <div id="projectbrief">Toolbox and applications of the immersed-boundary method for distributed-memory architectures</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.3 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "../../search",'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="../../menudata.js"></script>
<script type="text/javascript" src="../../menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('../../',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(document).ready(function(){initNavTree('d8/df7/group__linsolver.html','../../'); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#namespaces">Namespaces</a> &#124;
<a href="#nested-classes">Classes</a> &#124;
<a href="#typedef-members">Typedefs</a> &#124;
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle"><div class="title">Linear solvers<div class="ingroups"><a class="el" href="../../da/d34/group__petibm.html">PetIBM building blocks</a></div></div></div>
</div><!--header-->
<div class="contents">

<p>Interfaces to different libraries of linear solvers.  
<a href="#details">More...</a></p>
<div class="dynheader">
Collaboration diagram for Linear solvers:</div>
<div class="dyncontent">
<div class="center"><iframe scrolling="no" frameborder="0" src="../../d8/df7/group__linsolver.svg" width="318" height="36"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe>
</div>
</div>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="namespaces" name="namespaces"></a>
Namespaces</h2></td></tr>
<tr class="memitem:d1/d12/namespacepetibm_1_1linsolver"><td class="memItemLeft" align="right" valign="top">namespace &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d1/d12/namespacepetibm_1_1linsolver.html">petibm::linsolver</a></td></tr>
<tr class="memdesc:d1/d12/namespacepetibm_1_1linsolver"><td class="mdescLeft">&#160;</td><td class="mdescRight">Collection of linear solvers from different libraries. <br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="nested-classes" name="nested-classes"></a>
Classes</h2></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">class &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../de/d3e/classpetibm_1_1linsolver_1_1_lin_solver_base.html">petibm::linsolver::LinSolverBase</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">The abstract (base) class for different iterative solvers.  <a href="../../de/d3e/classpetibm_1_1linsolver_1_1_lin_solver_base.html#details">More...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">class &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/d3a/classpetibm_1_1linsolver_1_1_lin_solver_amg_x.html">petibm::linsolver::LinSolverAmgX</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">Iterative solver using wrapper of AmgX.  <a href="../../df/d3a/classpetibm_1_1linsolver_1_1_lin_solver_amg_x.html#details">More...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">class &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d8/dfe/classpetibm_1_1linsolver_1_1_lin_solver_k_s_p.html">petibm::linsolver::LinSolverKSP</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">Iterative solver using PETSc KSP.  <a href="../../d8/dfe/classpetibm_1_1linsolver_1_1_lin_solver_k_s_p.html#details">More...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="typedef-members" name="typedef-members"></a>
Typedefs</h2></td></tr>
<tr class="memitem:gaf4b8946333755bf50282bc7916720763"><td class="memItemLeft" align="right" valign="top">typedef std::shared_ptr&lt; <a class="el" href="../../de/d3e/classpetibm_1_1linsolver_1_1_lin_solver_base.html">linsolver::LinSolverBase</a> &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d8/df7/group__linsolver.html#gaf4b8946333755bf50282bc7916720763">petibm::type::LinSolver</a></td></tr>
<tr class="memdesc:gaf4b8946333755bf50282bc7916720763"><td class="mdescLeft">&#160;</td><td class="mdescRight">Type definition of LinSolver.  <a href="../../d8/df7/group__linsolver.html#gaf4b8946333755bf50282bc7916720763">More...</a><br /></td></tr>
<tr class="separator:gaf4b8946333755bf50282bc7916720763"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="func-members" name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:ga4570812b9208e25e36d4479684844b49"><td class="memItemLeft" align="right" valign="top">PetscErrorCode&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d8/df7/group__linsolver.html#ga4570812b9208e25e36d4479684844b49">petibm::linsolver::createLinSolver</a> (const std::string &amp;solverName, const YAML::Node &amp;node, <a class="el" href="../../d8/df7/group__linsolver.html#gaf4b8946333755bf50282bc7916720763">type::LinSolver</a> &amp;solver)</td></tr>
<tr class="memdesc:ga4570812b9208e25e36d4479684844b49"><td class="mdescLeft">&#160;</td><td class="mdescRight">A factory function for creating a LinSolver.  <a href="../../d8/df7/group__linsolver.html#ga4570812b9208e25e36d4479684844b49">More...</a><br /></td></tr>
<tr class="separator:ga4570812b9208e25e36d4479684844b49"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<p >Interfaces to different libraries of linear solvers. </p>
<p >The design of PetIBM is to use shared pointer (std::shared_ptr) to hold instances. The class LinSolverBase is the abstract class for all kinds of linear solver classes. With an abstract class, we can unified the interfaces of different linear solver classes. Users should use the factory function <a class="el" href="../../d8/df7/group__linsolver.html#ga4570812b9208e25e36d4479684844b49" title="A factory function for creating a LinSolver.">petibm::linsolver::createLinSolver</a> to create an instance, instead of initializing the instance directly.</p>
<p >Currently, there are two different linear solvers: PETSc KSP and NVIDIA AmgX. Please see <a class="el" href="../../d8/df7/group__linsolver.html#ga4570812b9208e25e36d4479684844b49" title="A factory function for creating a LinSolver.">petibm::linsolver::createLinSolver</a> for how to create different types of linear solver instances.</p>
<p >The shared pointer holding a linear solver instance is defined as <a class="el" href="../../d8/df7/group__linsolver.html#gaf4b8946333755bf50282bc7916720763" title="Type definition of LinSolver.">petibm::type::LinSolver</a>. </p>
<h2 class="groupheader">Typedef Documentation</h2>
<a id="gaf4b8946333755bf50282bc7916720763" name="gaf4b8946333755bf50282bc7916720763"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gaf4b8946333755bf50282bc7916720763">&#9670;&nbsp;</a></span>LinSolver</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef std::shared_ptr&lt;<a class="el" href="../../de/d3e/classpetibm_1_1linsolver_1_1_lin_solver_base.html">linsolver::LinSolverBase</a>&gt; <a class="el" href="../../d8/df7/group__linsolver.html#gaf4b8946333755bf50282bc7916720763">petibm::type::LinSolver</a></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Type definition of LinSolver. </p>
<p >Use <a class="el" href="../../d8/df7/group__linsolver.html#ga4570812b9208e25e36d4479684844b49" title="A factory function for creating a LinSolver.">petibm::linsolver::createLinSolver</a> to create a LinSolver object.</p>
<p >Example Usage: </p><div class="fragment"><div class="line"> PetscErrorCode ierr;</div>
<div class="line"> Mat A;</div>
<div class="line"> Vec lhs, rhs;</div>
<div class="line"> <a class="code hl_typedef" href="../../d8/df7/group__linsolver.html#gaf4b8946333755bf50282bc7916720763">petibm::type::LinSolver</a> solver;</div>
<div class="line">.</div>
<div class="line"> <span class="comment">// create LinSolver with petibm::linsolver::createLinSolver</span></div>
<div class="line"> <span class="comment">// create matrix A, vectors lhs and rhs. See PETSc manual.</span></div>
<div class="line"> </div>
<div class="line"> ierr = solver-&gt;setMatrix(A); CKERRQ(ierr);</div>
<div class="line"> ierr = solver-&gt;solve(lhs, rhs); CHKERRQ(ierr);</div>
<div class="ttc" id="agroup__linsolver_html_gaf4b8946333755bf50282bc7916720763"><div class="ttname"><a href="../../d8/df7/group__linsolver.html#gaf4b8946333755bf50282bc7916720763">petibm::type::LinSolver</a></div><div class="ttdeci">std::shared_ptr&lt; linsolver::LinSolverBase &gt; LinSolver</div><div class="ttdoc">Type definition of LinSolver.</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d19/linsolver_8h_source.html#l00174">linsolver.h:174</a></div></div>
</div><!-- fragment --><dl class="section see"><dt>See also</dt><dd><a class="el" href="../../d8/df7/group__linsolver.html#ga4570812b9208e25e36d4479684844b49" title="A factory function for creating a LinSolver.">petibm::linsolver::createLinSolver</a>, <a class="el" href="../../de/d3e/classpetibm_1_1linsolver_1_1_lin_solver_base.html" title="The abstract (base) class for different iterative solvers.">petibm::linsolver::LinSolverBase</a>. </dd></dl>

<p class="definition">Definition at line <a class="el" href="../../d6/d19/linsolver_8h_source.html#l00174">174</a> of file <a class="el" href="../../d6/d19/linsolver_8h_source.html">linsolver.h</a>.</p>

</div>
</div>
<h2 class="groupheader">Function Documentation</h2>
<a id="ga4570812b9208e25e36d4479684844b49" name="ga4570812b9208e25e36d4479684844b49"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga4570812b9208e25e36d4479684844b49">&#9670;&nbsp;</a></span>createLinSolver()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">PetscErrorCode petibm::linsolver::createLinSolver </td>
          <td>(</td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>solverName</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const YAML::Node &amp;&#160;</td>
          <td class="paramname"><em>node</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d8/df7/group__linsolver.html#gaf4b8946333755bf50282bc7916720763">type::LinSolver</a> &amp;&#160;</td>
          <td class="paramname"><em>solver</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>A factory function for creating a LinSolver. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">solverName</td><td>[in] Name of the linear solver. </td></tr>
    <tr><td class="paramname">node</td><td>[in] <a class="el" href="../../d7/d1e/namespace_y_a_m_l.html">YAML</a> configuration node. </td></tr>
    <tr><td class="paramname">solver</td><td>[out] The linear solver.</td></tr>
  </table>
  </dd>
</dl>
<p>This function will look into the <code>parameters</code> and find the child key <code>&lt;solverName&gt;Solver</code>. Under <code>&lt;solverName&gt;Solver</code>, there should at least be two child keys: <code>type</code> and <code>config</code>. <code>type</code> indicate the type of the solver, and <code>config</code> provides the path to the the solver configuration file.</p>
<p >For example, if the name of the target LinSolver is <b>velocity</b>, this factory function will use <code>node[parameters][velocitySolver][type]</code>and <code>node[parameters][velocitySolver][config]</code> to determine the type and the path to the configuration file for the underlying linear solver.</p>
<p >Currently in PetIBM, the key <code>type</code> only accepts <code>CPU</code> and <code>GPU</code>.</p>
<p >An example of creating a LinSolver instance with KSP: </p><div class="fragment"><div class="line">YAML::Node node;</div>
<div class="line">node[<span class="stringliteral">&quot;parameters&quot;</span>][<span class="stringliteral">&quot;velocitySolver&quot;</span>][<span class="stringliteral">&quot;type&quot;</span>] = <span class="stringliteral">&quot;CPU&quot;</span>;</div>
<div class="line">node[<span class="stringliteral">&quot;parameters&quot;</span>][<span class="stringliteral">&quot;velocitySolver&quot;</span>][<span class="stringliteral">&quot;config&quot;</span>] = <span class="stringliteral">&quot;solversPetscOptions.info&quot;</span>;</div>
<div class="line"> </div>
<div class="line">PetscErrorCode ierr;</div>
<div class="line"><a class="code hl_typedef" href="../../d8/df7/group__linsolver.html#gaf4b8946333755bf50282bc7916720763">petibm::type::LinSolver</a> solver;</div>
<div class="line">ierr = <a class="code hl_function" href="../../d8/df7/group__linsolver.html#ga4570812b9208e25e36d4479684844b49">petibm::linsolver::createLinSolver</a>(</div>
<div class="line">    <span class="stringliteral">&quot;velocity&quot;</span>, node, solver); CHKERRQ(ierr);</div>
<div class="ttc" id="agroup__linsolver_html_ga4570812b9208e25e36d4479684844b49"><div class="ttname"><a href="../../d8/df7/group__linsolver.html#ga4570812b9208e25e36d4479684844b49">petibm::linsolver::createLinSolver</a></div><div class="ttdeci">PetscErrorCode createLinSolver(const std::string &amp;solverName, const YAML::Node &amp;node, type::LinSolver &amp;solver)</div><div class="ttdoc">A factory function for creating a LinSolver.</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d19/linsolver_8cpp_source.html#l00057">linsolver.cpp:57</a></div></div>
</div><!-- fragment --><dl class="section return"><dt>Returns</dt><dd>PetscErrorCode.</dd></dl>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="../../d8/df7/group__linsolver.html#gaf4b8946333755bf50282bc7916720763" title="Type definition of LinSolver.">petibm::type::LinSolver</a> </dd></dl>

<p class="definition">Definition at line <a class="el" href="../../d5/d19/linsolver_8cpp_source.html#l00057">57</a> of file <a class="el" href="../../d5/d19/linsolver_8cpp_source.html">linsolver.cpp</a>.</p>

</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated on Mon May 30 2022 16:28:11 for PetIBM by <a href="https://www.doxygen.org/index.html"><img class="footer" src="../../doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.3 </li>
  </ul>
</div>
</body>
</html>
